<mat-toolbar color="primary">
  <div class="logo-container" routerLink="/">
    <mat-icon class="logo-icon">build</mat-icon>
    <span>Autó Alkatrész Webshop</span>
  </div>
  <span class="spacer"></span>
  
  <!-- Asztali menü -->
  <div class="desktop-menu">
    <a mat-button class="nav-link" routerLink="/" routerLinkActive="active-link" [routerLinkActiveOptions]="{exact: true}">
      <mat-icon>home</mat-icon> Kezdőlap
    </a>
    <a mat-button class="nav-link" routerLink="/parts" routerLinkActive="active-link">
      <mat-icon>settings</mat-icon> Alkatrészek
    </a>
    <ng-container *ngIf="user$ | async as user; else desktopNotLogged">
      <ng-container *ngIf="isAdmin$ | async; else desktopNormalUser">
        <a mat-button class="nav-link" routerLink="/admin" routerLinkActive="active-link">
          <mat-icon>dashboard</mat-icon> Admin
        </a>
      </ng-container>
      <ng-template #desktopNormalUser>
        <a mat-button class="nav-link" routerLink="/profile" routerLinkActive="active-link">
          <mat-icon>person</mat-icon> Profil
        </a>
        <a mat-button class="nav-link" [class.cart-link]="((cartItemsCount$ | async) ?? 0) > 0" routerLink="/cart" routerLinkActive="active-link">
          <mat-icon>shopping_cart</mat-icon> Kosár
          <span *ngIf="((cartItemsCount$ | async) ?? 0) > 0" class="cart-badge">
            {{cartItemsCount$ | async}}
          </span>
        </a>
      </ng-template>
      <button mat-button color="accent" (click)="signOut()">
        <mat-icon>exit_to_app</mat-icon> Kijelentkezés
      </button>
    </ng-container>
    <ng-template #desktopNotLogged>
      <a mat-button class="nav-link" routerLink="/login" routerLinkActive="active-link">
        <mat-icon>login</mat-icon> Bejelentkezés
      </a>
      <a mat-button class="nav-link" routerLink="/register" routerLinkActive="active-link">
        <mat-icon>person_add</mat-icon> Regisztráció
      </a>
    </ng-template>
  </div>
  
  <!-- Mobil kosár gomb mindig látható -->
  <div class="mobile-cart" *ngIf="(user$ | async) && !((isAdmin$ | async))">
    <a mat-icon-button class="nav-link" [class.cart-link]="((cartItemsCount$ | async) ?? 0) > 0" routerLink="/cart" routerLinkActive="active-link">
      <mat-icon>shopping_cart</mat-icon>
      <span *ngIf="((cartItemsCount$ | async) ?? 0) > 0" class="cart-badge">
        {{cartItemsCount$ | async}}
      </span>
    </a>
  </div>
  
  <!-- Mobil hamburger menü gomb -->
  <button mat-icon-button class="mobile-menu-toggle" (click)="toggleMobileMenu()">
    <mat-icon>{{ mobileMenuOpen ? 'close' : 'menu' }}</mat-icon>
  </button>
</mat-toolbar>

<!-- Mobil menü panel -->
<div class="mobile-menu" [class.open]="mobileMenuOpen">
  <div class="mobile-menu-items">
    <a mat-button class="nav-link" routerLink="/" routerLinkActive="active-link" [routerLinkActiveOptions]="{exact: true}" (click)="closeMobileMenu()">
      <mat-icon>home</mat-icon> Kezdőlap
    </a>
    <a mat-button class="nav-link" routerLink="/parts" routerLinkActive="active-link" (click)="closeMobileMenu()">
      <mat-icon>settings</mat-icon> Alkatrészek
    </a>
    <ng-container *ngIf="user$ | async as user">
      <ng-container *ngIf="isAdmin$ | async; else mobileNormalUser">
        <a mat-button class="nav-link" routerLink="/admin" routerLinkActive="active-link" (click)="closeMobileMenu()">
          <mat-icon>dashboard</mat-icon> Admin
        </a>
      </ng-container>
      <ng-template #mobileNormalUser>
        <a mat-button class="nav-link" routerLink="/profile" routerLinkActive="active-link" (click)="closeMobileMenu()">
          <mat-icon>person</mat-icon> Profil
        </a>
        <a mat-button class="nav-link" routerLink="/cart" routerLinkActive="active-link" (click)="closeMobileMenu()">
          <mat-icon>shopping_cart</mat-icon> Kosár
          <span *ngIf="((cartItemsCount$ | async) ?? 0) > 0" class="cart-count">{{cartItemsCount$ | async}}</span>
        </a>
      </ng-template>
      <button mat-button color="accent" (click)="signOut(); closeMobileMenu()">
        <mat-icon>exit_to_app</mat-icon> Kijelentkezés
      </button>
    </ng-container>
    <ng-container *ngIf="!(user$ | async)">
      <a mat-button class="nav-link" routerLink="/login" routerLinkActive="active-link" (click)="closeMobileMenu()">
        <mat-icon>login</mat-icon> Bejelentkezés
      </a>
      <a mat-button class="nav-link" routerLink="/register" routerLinkActive="active-link" (click)="closeMobileMenu()">
        <mat-icon>person_add</mat-icon> Regisztráció
      </a>
    </ng-container>
  </div>
</div>

<div class="main-content">
  <router-outlet></router-outlet>
</div>

<footer class="footer">
  <div class="footer-content">
    
    <div class="footer-section">
      <h3>Népszerű márkák</h3>
      <a [routerLink]="['/parts']" [queryParams]="{brand: 'Bosch'}">Bosch</a>
      <a [routerLink]="['/parts']" [queryParams]="{brand: 'Valeo'}">Valeo</a>
      <a [routerLink]="['/parts']" [queryParams]="{brand: 'Continental'}">Continental</a>
      <a [routerLink]="['/parts']" [queryParams]="{brand: 'Febi Bilstein'}">Febi Bilstein</a>
    </div>
    
    <div class="footer-section">
      <h3>Kapcsolat</h3>
      <p>Email: info&#64;projektmunka.hu</p>
      <p>Telefon: +36 1 123 4567</p>
      <p>Cím: 1234 Budapest, Példa utca 1.</p>
    </div>
  </div>
  
  <div class="footer-bottom">
    <p>&copy; {{ currentYear }} Autó Alkatrész Webshop. Minden jog fenntartva.</p>
  </div>
</footer>